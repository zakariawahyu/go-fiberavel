// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.27.0
// source: configuration.sql

package sqlc

import (
	"context"
)

const createConfiguration = `-- name: CreateConfiguration :exec
INSERT INTO configurations (
    type, title, description, image, image_caption, custom_data
) VALUES (
             $1, $2, $3, $4, $5, $6
         )
`

type CreateConfigurationParams struct {
	Type         string  `json:"type"`
	Title        string  `json:"title"`
	Description  string  `json:"description"`
	Image        *string `json:"image"`
	ImageCaption *string `json:"image_caption"`
	CustomData   []byte  `json:"custom_data"`
}

func (q *Queries) CreateConfiguration(ctx context.Context, arg CreateConfigurationParams) error {
	_, err := q.db.Exec(ctx, createConfiguration,
		arg.Type,
		arg.Title,
		arg.Description,
		arg.Image,
		arg.ImageCaption,
		arg.CustomData,
	)
	return err
}

const getConfigurationByType = `-- name: GetConfigurationByType :one
SELECT id, type, title, description, image, image_caption, custom_data->'custom_data' as custom_data, is_active FROM configurations WHERE type = $1
`

type GetConfigurationByTypeRow struct {
	ID           int64       `json:"id"`
	Type         string      `json:"type"`
	Title        string      `json:"title"`
	Description  string      `json:"description"`
	Image        *string     `json:"image"`
	ImageCaption *string     `json:"image_caption"`
	CustomData   interface{} `json:"custom_data"`
	IsActive     *bool       `json:"is_active"`
}

func (q *Queries) GetConfigurationByType(ctx context.Context, type_ string) (GetConfigurationByTypeRow, error) {
	row := q.db.QueryRow(ctx, getConfigurationByType, type_)
	var i GetConfigurationByTypeRow
	err := row.Scan(
		&i.ID,
		&i.Type,
		&i.Title,
		&i.Description,
		&i.Image,
		&i.ImageCaption,
		&i.CustomData,
		&i.IsActive,
	)
	return i, err
}

const updateConfiguration = `-- name: UpdateConfiguration :exec
UPDATE configurations SET
    title = $2,
    description = $3,
    image = COALESCE($4, image),
    image_caption = $5,
    custom_data = $6,
    updated_at = NOW()
WHERE type = $1
`

type UpdateConfigurationParams struct {
	Type         string  `json:"type"`
	Title        string  `json:"title"`
	Description  string  `json:"description"`
	Image        *string `json:"image"`
	ImageCaption *string `json:"image_caption"`
	CustomData   []byte  `json:"custom_data"`
}

func (q *Queries) UpdateConfiguration(ctx context.Context, arg UpdateConfigurationParams) error {
	_, err := q.db.Exec(ctx, updateConfiguration,
		arg.Type,
		arg.Title,
		arg.Description,
		arg.Image,
		arg.ImageCaption,
		arg.CustomData,
	)
	return err
}
